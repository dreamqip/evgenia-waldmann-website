---
import type AccordionItem from "./AccordionItem.astro";
---

<accordion-group>
  <slot />
</accordion-group>

<script>
  const ACCORDION_ITEM_SELECTOR = "accordion-item";

  class AccordionGroup extends HTMLElement implements CustomElement {
    private _accordions: NodeListOf<HTMLElement>;

    constructor() {
      super();

      this._accordions = this._queryAccordions();
    }

    connectedCallback() {
      console.log("Custom element added to page.");
      console.log(this._accordions, "accordions");
    }

    disconnectedCallback() {
      console.log("Custom element removed from page.");
    }

    adoptedCallback() {
      console.log("Custom element moved to new page.");
    }

    attributeChangedCallback(
      name: string,
      oldValue: string | null,
      newValue: string,
    ) {
      console.log(`Attribute ${name} has changed.`);
    }

    private _queryAccordions() {
      return this.querySelectorAll<HTMLElement>(ACCORDION_ITEM_SELECTOR);
    }
  }

  customElements.define("accordion-group", AccordionGroup);
</script>
